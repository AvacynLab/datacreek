........................................................................ [ 15%]
........................................................................ [ 30%]
........................................................................ [ 45%]
........................s.s..................sF......................... [ 60%]
.F..........s...........FF.............................................. [ 75%]
........................................................................ [ 90%]
..............................................                           [100%]
==================================== ERRORS ====================================
___________________ ERROR collecting tests/unit/test_api.py ____________________
ImportError while importing test module '/workspace/datacreek/tests/unit/test_api.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_api.py:6: in <module>
    import datacreek.api as api
datacreek/api.py:8: in <module>
    from sqlalchemy.orm import Session
E   ModuleNotFoundError: No module named 'sqlalchemy'
______________ ERROR collecting tests/unit/test_dp_middleware.py _______________
/root/.pyenv/versions/3.12.10/lib/python3.12/site-packages/starlette/testclient.py:44: in <module>
    import httpx
E   ModuleNotFoundError: No module named 'httpx'

During handling of the above exception, another exception occurred:
tests/unit/test_dp_middleware.py:6: in <module>
    from starlette.testclient import TestClient
/root/.pyenv/versions/3.12.10/lib/python3.12/site-packages/starlette/testclient.py:46: in <module>
    raise RuntimeError(
E   RuntimeError: The starlette.testclient module requires the httpx package to be installed.
E   You can install this with:
E       $ pip install httpx
______________ ERROR collecting tests/unit/test_explain_router.py ______________
ImportError while importing test module '/workspace/datacreek/tests/unit/test_explain_router.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_explain_router.py:11: in <module>
    router = importlib.import_module("datacreek.routers.explain_router")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
datacreek/routers/__init__.py:3: in <module>
    from .explain_router import router as explain_router
datacreek/routers/explain_router.py:19: in <module>
    from datacreek.db import SessionLocal, User
datacreek/db.py:13: in <module>
    from sqlalchemy import Column, Float, ForeignKey, Integer, String, Text, create_engine
E   ModuleNotFoundError: No module named 'sqlalchemy'
______________ ERROR collecting tests/unit/test_neo4j_breaker.py _______________
ImportError while importing test module '/workspace/datacreek/tests/unit/test_neo4j_breaker.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_neo4j_breaker.py:2: in <module>
    from datacreek.utils import neo4j_breaker as nb
datacreek/utils/neo4j_breaker.py:6: in <module>
    import pybreaker
E   ModuleNotFoundError: No module named 'pybreaker'
______________ ERROR collecting tests/unit/test_self_instruct.py _______________
ImportError while importing test module '/workspace/datacreek/tests/unit/test_self_instruct.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_self_instruct.py:7: in <module>
    import datacreek.utils.self_instruct as si
datacreek/utils/self_instruct.py:9: in <module>
    from ..templates.library import validate_output
datacreek/templates/__init__.py:1: in <module>
    from .library import PromptTemplate, get_template, validate_output
datacreek/templates/library.py:11: in <module>
    import jsonschema
E   ModuleNotFoundError: No module named 'jsonschema'
_________________ ERROR collecting tests/unit/test_services.py _________________
ImportError while importing test module '/workspace/datacreek/tests/unit/test_services.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_services.py:3: in <module>
    from sqlalchemy import create_engine
E   ModuleNotFoundError: No module named 'sqlalchemy'
__________________ ERROR collecting tests/unit/test_tasks.py ___________________
ImportError while importing test module '/workspace/datacreek/tests/unit/test_tasks.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_tasks.py:2: in <module>
    from datacreek import tasks
datacreek/tasks.py:73: in <module>
    from datacreek.db import Dataset, SessionLocal, SourceData
datacreek/db.py:13: in <module>
    from sqlalchemy import Column, Float, ForeignKey, Integer, String, Text, create_engine
E   ModuleNotFoundError: No module named 'sqlalchemy'
_____________ ERROR collecting tests/unit/test_template_library.py _____________
ImportError while importing test module '/workspace/datacreek/tests/unit/test_template_library.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_template_library.py:3: in <module>
    import datacreek.templates.library as lib
datacreek/templates/__init__.py:1: in <module>
    from .library import PromptTemplate, get_template, validate_output
datacreek/templates/library.py:11: in <module>
    import jsonschema
E   ModuleNotFoundError: No module named 'jsonschema'
______________ ERROR collecting tests/unit/test_tenant_privacy.py ______________
ImportError while importing test module '/workspace/datacreek/tests/unit/test_tenant_privacy.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_tenant_privacy.py:5: in <module>
    import datacreek.security.tenant_privacy as tp
datacreek/security/tenant_privacy.py:5: in <module>
    from sqlalchemy.orm import Session
E   ModuleNotFoundError: No module named 'sqlalchemy'
______________ ERROR collecting tests/unit/test_vector_router.py _______________
ImportError while importing test module '/workspace/datacreek/tests/unit/test_vector_router.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_vector_router.py:6: in <module>
    router = importlib.import_module("datacreek.routers.vector_router")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/root/.pyenv/versions/3.12.10/lib/python3.12/importlib/__init__.py:90: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
datacreek/routers/__init__.py:3: in <module>
    from .explain_router import router as explain_router
datacreek/routers/explain_router.py:19: in <module>
    from datacreek.db import SessionLocal, User
datacreek/db.py:13: in <module>
    from sqlalchemy import Column, Float, ForeignKey, Integer, String, Text, create_engine
E   ModuleNotFoundError: No module named 'sqlalchemy'
=================================== FAILURES ===================================
___________________ test_chunk_document_queries_and_cleanup ____________________

    def test_chunk_document_queries_and_cleanup():
        kg = build_sample_graph()
        assert kg.chunks_by_emotion("joy") == []
        assert kg.chunks_by_modality("text") == []
        kg.graph.nodes["c1"]["emotion"] = "joy"
        kg.graph.nodes["c2"]["modality"] = "text"
        assert kg.chunks_by_emotion("joy") == ["c1"]
        assert kg.chunks_by_modality("text") == ["c2"]
        kg.graph.nodes["c1"]["birth_date"] = "2023-05-01T00:00:00"
>       assert kg.normalize_date_fields() == 1
E       assert 0 == 1
E        +  where 0 = normalize_date_fields()
E        +    where normalize_date_fields = KnowledgeGraph(graph=<networkx.classes.digraph.DiGraph object at 0x7f0c5a5ddca0>, use_hnsw=False, index=<datacreek.utils.retrieval.EmbeddingIndex object at 0x7f0c5a5dd460>).normalize_date_fields

tests/unit/test_knowledge_graph_extended.py:59: AssertionError
_____________________________ test_misc_operations _____________________________

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f0c5a5dfa70>

    def test_misc_operations(monkeypatch):
        kg = build_graph()
        # stub BeautifulSoup
        bs4 = types.SimpleNamespace(BeautifulSoup=lambda txt, parser: types.SimpleNamespace(get_text=lambda sep: txt.replace("<b>", "").replace("</b>", "")))
        monkeypatch.setitem(sys.modules, "bs4", bs4)
        # patch nearest_neighbors
        monkeypatch.setattr(kg.index, "nearest_neighbors", lambda k, return_distances=True: {"c1": [("c2", 0.9)]})
        kg.link_similar_chunks()
        assert kg.graph.edges["c1", "c2"].get("relation") == "similar_to"
        assert kg.clean_chunk_texts() == 1
        kg.graph.nodes["c1"]["birth_date"] = "2025-01-01T00:00:00"
>       assert kg.normalize_date_fields() == 1
E       assert 0 == 1
E        +  where 0 = normalize_date_fields()
E        +    where normalize_date_fields = KnowledgeGraph(graph=<networkx.classes.digraph.DiGraph object at 0x7f0c5a5dc7d0>, use_hnsw=False, index=<datacreek.utils.retrieval.EmbeddingIndex object at 0x7f0c5a5df9b0>).normalize_date_fields

tests/unit/test_knowledge_graph_operations.py:32: AssertionError
____________________________ test_check_vllm_server ____________________________

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f0c5a58ee70>

    def test_check_vllm_server(monkeypatch):
        _patch_config(monkeypatch)
        client = llm.LLMClient
>       monkeypatch.setattr(llm.requests, "get", lambda *a, **k: DummyResp(200, {"ok": True}))

tests/unit/test_llm_client.py:37: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <datacreek.models.llm_client._RequestsStub object at 0x7f0c69ae1af0>
name = 'get'

    def __getattr__(self, name: str):
>       raise ImportError("requests library is required for HTTP operations")
E       ImportError: requests library is required for HTTP operations

datacreek/models/llm_client.py:24: ImportError
___________________________ test_vllm_chat_and_batch ___________________________

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f0c593b0dd0>

    def test_vllm_chat_and_batch(monkeypatch):
        _patch_config(monkeypatch)
        monkeypatch.setattr(llm.LLMClient, "_check_vllm_server", lambda self: (True, {}))
        import datacreek.analysis.generation as gen
        called = {}
        monkeypatch.setattr(
            gen,
            "apply_logit_bias",
            lambda data, loc, glob: called.setdefault("bias", True),
        )
        responses = iter([
            DummyResp(200, {"choices": [{"message": {"content": "first"}}]}),
            DummyResp(200, {"choices": [{"message": {"content": "second"}}]}),
            DummyResp(200, {"choices": [{"message": {"content": "third"}}]}),
        ])
        def fake_post(url, headers=None, data=None, timeout=180):
            return next(responses)
>       monkeypatch.setattr(llm.requests, "post", fake_post)

tests/unit/test_llm_client.py:63: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <datacreek.models.llm_client._RequestsStub object at 0x7f0c69ae1af0>
name = 'post'

    def __getattr__(self, name: str):
>       raise ImportError("requests library is required for HTTP operations")
E       ImportError: requests library is required for HTTP operations

datacreek/models/llm_client.py:24: ImportError
=============================== warnings summary ===============================
tests/unit/test_mapper.py::test_cache_mapper_nerve_with_redis_and_lmdb
  /root/.pyenv/versions/3.12.10/lib/python3.12/site-packages/networkx/readwrite/json_graph/node_link.py:145: FutureWarning: 
  The default value will be `edges="edges" in NetworkX 3.6.
  
  To make this warning go away, explicitly set the edges kwarg, e.g.:
  
    nx.node_link_data(G, edges="links") to preserve current behavior, or
    nx.node_link_data(G, edges="edges") for forward compatibility.
    warnings.warn(

tests/unit/test_mapper.py::test_cache_mapper_nerve_with_redis_and_lmdb
  /root/.pyenv/versions/3.12.10/lib/python3.12/site-packages/networkx/readwrite/json_graph/node_link.py:290: FutureWarning: 
  The default value will be changed to `edges="edges" in NetworkX 3.6.
  
  To make this warning go away, explicitly set the edges kwarg, e.g.:
  
    nx.node_link_graph(data, edges="links") to preserve current behavior, or
    nx.node_link_graph(data, edges="edges") for forward compatibility.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.10-final-0 _______________

Name                                             Stmts   Miss  Cover
--------------------------------------------------------------------
datacreek/__init__.py                               15      0   100%
datacreek/analysis/__init__.py                       1      0   100%
datacreek/analysis/autotune.py                      70      4    94%
datacreek/analysis/chebyshev_diag.py                14      0   100%
datacreek/analysis/compression.py                   94     12    87%
datacreek/analysis/explain_viz.py                   27      0   100%
datacreek/analysis/filtering.py                     28      0   100%
datacreek/analysis/fractal.py                      185     19    90%
datacreek/analysis/generation.py                   175     20    89%
datacreek/analysis/governance.py                    54      2    96%
datacreek/analysis/graphwave_bandwidth.py           35      1    97%
datacreek/analysis/graphwave_cuda.py                17     17     0%
datacreek/analysis/hybrid_ann.py                    17      1    94%
datacreek/analysis/hypergraph.py                    87      1    99%
datacreek/analysis/index.py                         72      6    92%
datacreek/analysis/information.py                   98     10    90%
datacreek/analysis/ingestion.py                     28      3    89%
datacreek/analysis/mapper.py                       270     41    85%
datacreek/analysis/monitoring.py                    71      2    97%
datacreek/analysis/multiview.py                    155      7    95%
datacreek/analysis/node2vec_tuning.py               48     48     0%
datacreek/analysis/nprobe_tuning.py                 61     61     0%
datacreek/analysis/poincare_recentering.py          94      3    97%
datacreek/analysis/privacy.py                       14      0   100%
datacreek/analysis/rollback.py                      24      1    96%
datacreek/analysis/sheaf.py                        144     15    90%
datacreek/analysis/symmetry.py                      47      4    91%
datacreek/analysis/tpl.py                           57     57     0%
datacreek/analysis/tpl_incremental.py               49     49     0%
datacreek/api.py                                   188    181     4%
datacreek/backend/__init__.py                        2      0   100%
datacreek/backend/array_api.py                      22      3    86%
datacreek/backends.py                               89     13    85%
datacreek/cli.py                                    13      1    92%
datacreek/config/__init__.py                         0      0   100%
datacreek/config/schema.py                          14      0   100%
datacreek/config_models.py                         131     11    92%
datacreek/core/__init__.py                           6      0   100%
datacreek/core/cleanup.py                           19      2    89%
datacreek/core/context.py                           13      0   100%
datacreek/core/create.py                            29      0   100%
datacreek/core/curate.py                           158     20    87%
datacreek/core/dataset.py                            1      0   100%
datacreek/core/dataset_full.py                     289    289     0%
datacreek/core/dataset_light.py                     60      3    95%
datacreek/core/fractal.py                          105      8    92%
datacreek/core/ingest.py                           385     75    81%
datacreek/core/knowledge_graph.py                   57      3    95%
datacreek/core/runners.py                           76     11    86%
datacreek/core/save_as.py                           66     10    85%
datacreek/db.py                                     57     53     7%
datacreek/dp/__init__.py                             2      0   100%
datacreek/dp/accountant.py                          21      1    95%
datacreek/generators/__init__.py                    30      0   100%
datacreek/generators/base.py                        18      2    89%
datacreek/generators/conversation_generator.py      25      0   100%
datacreek/generators/cot_generator.py               97     97     0%
datacreek/generators/kg_generator.py                64     13    80%
datacreek/generators/multi_tool_generator.py        30      0   100%
datacreek/generators/pref_generator.py              59      8    86%
datacreek/generators/qa_generator.py                80     11    86%
datacreek/generators/tool_generator.py              30      0   100%
datacreek/generators/vqa_generator.py               59      3    95%
datacreek/models/__init__.py                        45      0   100%
datacreek/models/content_type.py                    13      0   100%
datacreek/models/cot.py                              9      1    89%
datacreek/models/export_format.py                    7      0   100%
datacreek/models/llm_client.py                      90     68    24%
datacreek/models/llm_service.py                     17      0   100%
datacreek/models/qa.py                              24      0   100%
datacreek/models/results.py                         61      7    89%
datacreek/models/stage.py                            7      0   100%
datacreek/models/task_status.py                     16      0   100%
datacreek/parsers/__init__.py                       18      3    83%
datacreek/parsers/audio_parser.py                   12      2    83%
datacreek/parsers/base.py                            3      0   100%
datacreek/parsers/code_parser.py                     6      0   100%
datacreek/parsers/docx_parser.py                    11      0   100%
datacreek/parsers/html_parser.py                    12      0   100%
datacreek/parsers/image_parser.py                   12      0   100%
datacreek/parsers/pdf_parser.py                     41      6    85%
datacreek/parsers/ppt_parser.py                     11      0   100%
datacreek/parsers/txt_parser.py                      6      0   100%
datacreek/parsers/whisper_audio_parser.py           32      6    81%
datacreek/parsers/youtube_parser.py                 17      2    88%
datacreek/pipelines.py                             292     27    91%
datacreek/plugins/__init__.py                        2      2     0%
datacreek/plugins/pgvector_export.py                53     53     0%
datacreek/routers/__init__.py                        2      1    50%
datacreek/routers/explain_router.py                 39     30    23%
datacreek/routers/vector_router.py                  25     25     0%
datacreek/schemas.py                                55     55     0%
datacreek/security/__init__.py                       0      0   100%
datacreek/security/dp_budget.py                     43      1    98%
datacreek/security/dp_middleware.py                 40     40     0%
datacreek/security/tenant_privacy.py                29     27     7%
datacreek/services.py                               98     98     0%
datacreek/storage.py                                21      0   100%
datacreek/tasks.py                                  77     54    30%
datacreek/telemetry.py                              39      5    87%
datacreek/templates/__init__.py                      1      0   100%
datacreek/templates/library.py                      43     35    19%
datacreek/utils/__init__.py                         54      1    98%
datacreek/utils/audio_vad.py                        28      0   100%
datacreek/utils/backpressure.py                     55      3    95%
datacreek/utils/batch.py                            38      0   100%
datacreek/utils/cache.py                            69      9    87%
datacreek/utils/checksum.py                          8      0   100%
datacreek/utils/chunking.py                         89      1    99%
datacreek/utils/config.py                          155     20    87%
datacreek/utils/crypto.py                           25      0   100%
datacreek/utils/curation_agent.py                   24      4    83%
datacreek/utils/dataset_cleanup.py                  16      0   100%
datacreek/utils/delta_export.py                     24      1    96%
datacreek/utils/emotion.py                          15      0   100%
datacreek/utils/entity_extraction.py                16      0   100%
datacreek/utils/evict_log.py                        36      6    83%
datacreek/utils/fact_extraction.py                  34      1    97%
datacreek/utils/format_converter.py                 27      0   100%
datacreek/utils/gitinfo.py                           8      0   100%
datacreek/utils/graph_text.py                       56      1    98%
datacreek/utils/image_captioning.py                 33      1    97%
datacreek/utils/image_dedup.py                      30      0   100%
datacreek/utils/kafka_queue.py                      35      4    89%
datacreek/utils/llm_processing.py                  136     22    84%
datacreek/utils/metrics.py                           9      0   100%
datacreek/utils/modality.py                         27      0   100%
datacreek/utils/neo4j_breaker.py                    26     23    12%
datacreek/utils/progress.py                         14      0   100%
datacreek/utils/rate_limit.py                       46      1    98%
datacreek/utils/redis_helpers.py                    15      0   100%
datacreek/utils/redis_pid.py                        74      4    95%
datacreek/utils/retrieval.py                       132      7    95%
datacreek/utils/self_instruct.py                    42     37    12%
datacreek/utils/text.py                            119     14    88%
datacreek/utils/toolformer.py                       42      0   100%
datacreek/utils/whisper_batch.py                    57      9    84%
--------------------------------------------------------------------
TOTAL                                             7289   1919    74%
=========================== short test summary info ============================
FAILED tests/unit/test_knowledge_graph_extended.py::test_chunk_document_queries_and_cleanup
FAILED tests/unit/test_knowledge_graph_operations.py::test_misc_operations - ...
FAILED tests/unit/test_llm_client.py::test_check_vllm_server - ImportError: r...
FAILED tests/unit/test_llm_client.py::test_vllm_chat_and_batch - ImportError:...
ERROR tests/unit/test_api.py
ERROR tests/unit/test_dp_middleware.py - RuntimeError: The starlette.testclie...
ERROR tests/unit/test_explain_router.py
ERROR tests/unit/test_neo4j_breaker.py
ERROR tests/unit/test_self_instruct.py
ERROR tests/unit/test_services.py
ERROR tests/unit/test_tasks.py
ERROR tests/unit/test_template_library.py
ERROR tests/unit/test_tenant_privacy.py
ERROR tests/unit/test_vector_router.py
4 failed, 470 passed, 4 skipped, 2 warnings, 10 errors in 11.83s
sss..................................................................... [ 50%]
......................................................................   [100%]
=============================== warnings summary ===============================
tests/heavy/test_mapper.py::test_cache_mapper_nerve_full_stack
tests/heavy/test_mapper.py::test_cache_put_and_get_l2
  /root/.pyenv/versions/3.12.10/lib/python3.12/site-packages/networkx/readwrite/json_graph/node_link.py:145: FutureWarning: 
  The default value will be `edges="edges" in NetworkX 3.6.
  
  To make this warning go away, explicitly set the edges kwarg, e.g.:
  
    nx.node_link_data(G, edges="links") to preserve current behavior, or
    nx.node_link_data(G, edges="edges") for forward compatibility.
    warnings.warn(

tests/heavy/test_mapper.py::test_cache_mapper_nerve_full_stack
tests/heavy/test_mapper.py::test_cache_put_and_get_l2
  /root/.pyenv/versions/3.12.10/lib/python3.12/site-packages/networkx/readwrite/json_graph/node_link.py:290: FutureWarning: 
  The default value will be changed to `edges="edges" in NetworkX 3.6.
  
  To make this warning go away, explicitly set the edges kwarg, e.g.:
  
    nx.node_link_graph(data, edges="links") to preserve current behavior, or
    nx.node_link_graph(data, edges="edges") for forward compatibility.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.10-final-0 _______________

Name                                             Stmts   Miss  Cover
--------------------------------------------------------------------
datacreek/__init__.py                               15      0   100%
datacreek/analysis/__init__.py                       1      0   100%
datacreek/analysis/autotune.py                      70      5    93%
datacreek/analysis/chebyshev_diag.py                14      0   100%
datacreek/analysis/compression.py                   94     15    84%
datacreek/analysis/explain_viz.py                   27      1    96%
datacreek/analysis/filtering.py                     28      3    89%
datacreek/analysis/fractal.py                      185     23    88%
datacreek/analysis/generation.py                   175     17    90%
datacreek/analysis/governance.py                    54      3    94%
datacreek/analysis/graphwave_bandwidth.py           35      2    94%
datacreek/analysis/graphwave_cuda.py                17     17     0%
datacreek/analysis/hybrid_ann.py                    17      2    88%
datacreek/analysis/hypergraph.py                    87      0   100%
datacreek/analysis/index.py                         72     10    86%
datacreek/analysis/information.py                   98     12    88%
datacreek/analysis/ingestion.py                     28      4    86%
datacreek/analysis/mapper.py                       270     38    86%
datacreek/analysis/monitoring.py                    71      2    97%
datacreek/analysis/multiview.py                    155      7    95%
datacreek/analysis/node2vec_tuning.py               48      2    96%
datacreek/analysis/nprobe_tuning.py                 61      3    95%
datacreek/analysis/poincare_recentering.py          94      5    95%
datacreek/analysis/privacy.py                       14      1    93%
datacreek/analysis/rollback.py                      24      1    96%
datacreek/analysis/sheaf.py                        144     17    88%
datacreek/analysis/symmetry.py                      47      1    98%
datacreek/analysis/tpl.py                           57      1    98%
datacreek/analysis/tpl_incremental.py               49      2    96%
datacreek/api.py                                   188    181     4%
datacreek/backend/__init__.py                        2      0   100%
datacreek/backend/array_api.py                      22      9    59%
datacreek/backends.py                               89     63    29%
datacreek/cli.py                                    13     13     0%
datacreek/config/__init__.py                         0      0   100%
datacreek/config/schema.py                          14      0   100%
datacreek/config_models.py                         131     19    85%
datacreek/core/__init__.py                           6      2    67%
datacreek/core/cleanup.py                           19     14    26%
datacreek/core/context.py                           13      6    54%
datacreek/core/create.py                            29     10    66%
datacreek/core/curate.py                           158    137    13%
datacreek/core/dataset.py                            1      0   100%
datacreek/core/dataset_full.py                     289     57    80%
datacreek/core/dataset_light.py                     60     21    65%
datacreek/core/fractal.py                          105      8    92%
datacreek/core/ingest.py                           385    385     0%
datacreek/core/knowledge_graph.py                   57      3    95%
datacreek/core/runners.py                           76     76     0%
datacreek/core/save_as.py                           66     52    21%
datacreek/db.py                                     57     57     0%
datacreek/dp/__init__.py                             2      2     0%
datacreek/dp/accountant.py                          21     21     0%
datacreek/generators/__init__.py                    30     30     0%
datacreek/generators/base.py                        18     18     0%
datacreek/generators/conversation_generator.py      25     25     0%
datacreek/generators/cot_generator.py               97     97     0%
datacreek/generators/kg_generator.py                64     64     0%
datacreek/generators/multi_tool_generator.py        30     30     0%
datacreek/generators/pref_generator.py              59     59     0%
datacreek/generators/qa_generator.py                80     80     0%
datacreek/generators/tool_generator.py              30     30     0%
datacreek/generators/vqa_generator.py               59     59     0%
datacreek/models/__init__.py                        45     39    13%
datacreek/models/content_type.py                    13      0   100%
datacreek/models/cot.py                              9      1    89%
datacreek/models/export_format.py                    7      7     0%
datacreek/models/llm_client.py                      90     57    37%
datacreek/models/llm_service.py                     17      7    59%
datacreek/models/qa.py                              24      5    79%
datacreek/models/results.py                         61     11    82%
datacreek/models/stage.py                            7      0   100%
datacreek/models/task_status.py                     16     16     0%
datacreek/parsers/__init__.py                       18     18     0%
datacreek/parsers/audio_parser.py                   12     12     0%
datacreek/parsers/base.py                            3      3     0%
datacreek/parsers/code_parser.py                     6      6     0%
datacreek/parsers/docx_parser.py                    11     11     0%
datacreek/parsers/html_parser.py                    12     12     0%
datacreek/parsers/image_parser.py                   12     12     0%
datacreek/parsers/pdf_parser.py                     41     41     0%
datacreek/parsers/ppt_parser.py                     11     11     0%
datacreek/parsers/txt_parser.py                      6      6     0%
datacreek/parsers/whisper_audio_parser.py           32     32     0%
datacreek/parsers/youtube_parser.py                 17     17     0%
datacreek/pipelines.py                             292    119    59%
datacreek/plugins/__init__.py                        2      2     0%
datacreek/plugins/pgvector_export.py                53     53     0%
datacreek/routers/__init__.py                        2      2     0%
datacreek/routers/explain_router.py                 39     39     0%
datacreek/routers/vector_router.py                  25     25     0%
datacreek/schemas.py                                55     55     0%
datacreek/security/__init__.py                       0      0   100%
datacreek/security/dp_budget.py                     43     21    51%
datacreek/security/dp_middleware.py                 40     40     0%
datacreek/security/tenant_privacy.py                29     29     0%
datacreek/services.py                               98     98     0%
datacreek/storage.py                                21     10    52%
datacreek/tasks.py                                  77     77     0%
datacreek/telemetry.py                              39     39     0%
datacreek/templates/__init__.py                      1      1     0%
datacreek/templates/library.py                      43     43     0%
datacreek/utils/__init__.py                         54     20    63%
datacreek/utils/audio_vad.py                        28     22    21%
datacreek/utils/backpressure.py                     55     37    33%
datacreek/utils/batch.py                            38     38     0%
datacreek/utils/cache.py                            69      7    90%
datacreek/utils/checksum.py                          8      8     0%
datacreek/utils/chunking.py                         89     78    12%
datacreek/utils/config.py                          155     83    46%
datacreek/utils/crypto.py                           25     16    36%
datacreek/utils/curation_agent.py                   24     24     0%
datacreek/utils/dataset_cleanup.py                  16     12    25%
datacreek/utils/delta_export.py                     24     14    42%
datacreek/utils/emotion.py                          15     15     0%
datacreek/utils/entity_extraction.py                16     16     0%
datacreek/utils/evict_log.py                        36      6    83%
datacreek/utils/fact_extraction.py                  34     34     0%
datacreek/utils/format_converter.py                 27     19    30%
datacreek/utils/gitinfo.py                           8      5    38%
datacreek/utils/graph_text.py                       56     49    12%
datacreek/utils/image_captioning.py                 33     33     0%
datacreek/utils/image_dedup.py                      30      0   100%
datacreek/utils/kafka_queue.py                      35      6    83%
datacreek/utils/llm_processing.py                  136     24    82%
datacreek/utils/metrics.py                           9      0   100%
datacreek/utils/modality.py                         27      0   100%
datacreek/utils/neo4j_breaker.py                    26     26     0%
datacreek/utils/progress.py                         14      0   100%
datacreek/utils/rate_limit.py                       46     30    35%
datacreek/utils/redis_helpers.py                    15     11    27%
datacreek/utils/redis_pid.py                        74      9    88%
datacreek/utils/retrieval.py                       132     25    81%
datacreek/utils/self_instruct.py                    42     42     0%
datacreek/utils/text.py                            119     11    91%
datacreek/utils/toolformer.py                       42     35    17%
datacreek/utils/whisper_batch.py                    57      5    91%
--------------------------------------------------------------------
TOTAL                                             7289   3559    51%
139 passed, 3 skipped, 4 warnings in 9.24s
